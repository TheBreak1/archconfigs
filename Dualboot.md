В этом гайде распишем случай, если имеется только один диск и на нём уже установлена винда. Можно, конечно, её снести (и это очень просто), но мы живые люди, так что объединим хорошее с нужным.

Стоит сказать, что достать себе ещё один ссд уже не так дорого, тем более, когда osu! уже стоит на винде со всеми картами/скинами/итд. Полностью готовая установка Arch Linux на опыте занимает до 16гб, мб 32 если устанавливать что-то ещё. **Как заставить osu!(lazer) ссылаться на существующюю установки напишу потом.**

На февраль '25 скрипт установки archinstall не может и не хочет в дуалбут и никак не поможет установиться рядом с виндой. Основная проблема скрипта в работе с разделами диска, он просто советует всё стереть и установиться на чистый диск. Фу.

Поэтому перед тем, как заняться установкой диск нужно подготовить в самой винде. Для этого в гайде используем DiskGenius.

1. Качаем, запускаем.

![{548598F5-1580-419C-9E49-536C9CE07937}](https://github.com/user-attachments/assets/53cfe8aa-f219-4f73-9c9a-ec34c60ec683)

2. На голубой полоске находим раздел(C:, D: итд), где есть свободное место. На него тык с правой -> Resize Partition

![{9BFDFFAA-DBBB-44C0-891E-8852979E82F5}](https://github.com/user-attachments/assets/5d71b185-6d81-45bd-a973-0f1f9ae824a9)

![{3A5F6DCB-1546-4590-86CE-0C59B832CFAC}](https://github.com/user-attachments/assets/7b810a22-9375-42b9-96d3-fb4e676ca82c)

3. В окошке New Capacity текущий размер раздела. Отнимаем оттуда столько Гб, сколько нужно или на сколько хватит. имхо в идеале 32Гб + 1Гб для загрузчика Linux.

   476.07GB - 33 = 443.07 . Вводим, яйца в кулак, Start, на всё соглашаемся.

   Если сжимаем раздел с виндой, то прога будет делать страшные вещи -- пусть работает. Если стрёмно, то же самое можно сделать в встроенном в винду менеджере дисков (правой на кнопку Start -> Менеджер дисков).

![{68A72068-0928-48F9-9158-D77955E1A3D8}](https://github.com/user-attachments/assets/05668725-1548-49a7-b8da-e3ea460cf03b)

4. После этого на полосе увидим свободное место в сером цвете. ПКМ -> Create New Partition.

  ![{09D0FC40-9F0F-48CF-BC51-B54A0462BA8B}](https://github.com/user-attachments/assets/4b6dac0c-f3bd-43b6-9b85-7192f937fa61)

  В File System Type находим ?????????????????!!!!!!!!!!!!!! FAT32, В Size of Partition пишем 1GB -> OK. Это раздел для загрузчика.
  
  Для линукса повторяем то же самое, но файл система Ext4, размер сразу стоит всё, что осталось.

  Должно получиться так:

  ![{C964A750-6BD1-4A97-8852-3AFC21753DCB}](https://github.com/user-attachments/assets/ba87d264-ab84-46f7-9edb-8e14ec6ec649)

5. Если всё ок, сверху слева кнопка Save All. Тык, ок ок да да итд..

Со стороны винды всё готово, начинаем установку по гайду с одинм исключением:

Пункт 4. Disk Configuration.

Выбираем Manual Partitioning, выбираем диск, где делали разделы.

![{497A77EE-FB3A-426F-913D-CE96D9EEDA86}](https://github.com/user-attachments/assets/0ac2efcd-7b38-430b-9baa-979b958701ae)

В этом списке находим наш 1Гб FAT32 раздел -> Enter -> Assign Mountpoint -> пишем "/boot"

Потом 32гб ext4 раздел -> Enter -> Assign Mountpoint -> пишем "/"

Должно быть вот так:

![{031344C8-B1BC-436C-B5E1-6783182AE74A}](https://github.com/user-attachments/assets/850afb10-4864-4a8f-b2cc-16661d8429e2)

Confirm and exit, Back, дальше по гайду. На всякий я бы воздержался от шифрования.

Один момент, что не нравится, это то, что у нас на диске два раздела под загрузчики винды и линукса. Они могут жить в одном разделе, но 100Мб, что на это даёт винда, почему-то не хватает на линукс и Grub. ¯\_(ツ)_/¯

Archinstall не может в полноценное управление разделами и любая попытка сделать разделы через скрипт никуда не пошла. С cfdisk тоже особо не получалось, так чтоо пока так.


